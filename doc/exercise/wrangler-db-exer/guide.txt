#INFO
. We just use one db for development and production
. in Production cloudflare create deafult place for d1 and config
. compatibilityDate must be added to nuxt config <<<--- so importnat

#Installing and building
npx pnpm -D install wrangler                                            # Install dev wrangler for interact with cloudflare
npx nuxi build                                                          # build nuxt and creatte .output

cd server
npx pnpm run build                                      

#Run dev mode
npx wrangler dev                                                        # Run development wrangler remote
npx wrangler dev --env dev --local                                      # Run development wrangler local -- Running wrangler dev without --env dev (uses prod!) ,it is not necessary

#D1 
npx wrangler d1 create oil_db                                           # Create database on server
npx wrangler d1 create oil_db --local                                   # Create database on local

#Execute
npx wrangler d1 execute oil_db_test --local --file=./db/schema.sql                  # For running sql locally
npx wrangler d1 execute oil_db_test --env dev --local --file=./db/schema.sql        # Use env variable in toml , it is not necessary
npx wrangler d1 execute DB --local --command "UPDATE offers SET negotiation_field = json_array('price');"           # Execute command with array
npx wrangler d1 info <DATABASE_NAME> 

#Secret
wrangler secret put NUXT_SESSION_PASSWORD